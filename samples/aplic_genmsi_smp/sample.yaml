sample:
  description: APLIC GENMSI validation for SMP with multiple IMSIC controllers
  name: APLIC GENMSI SMP

common:
  tags:
    - riscv
    - interrupt
    - smp
  integration_platforms:
    - qemu_riscv32/qemu_virt_riscv32_aia/smp
  harness: console
  harness_config:
    type: multi_line
    regex:
      - "GENMSI SMP Test"

tests:
  sample.drivers.aplic_genmsi_smp:
    tags:
      - riscv
      - interrupt
      - smp
    depends_on:
      - smp
    filter: >
      (CONFIG_MP_MAX_NUM_CPUS > 1) and
      CONFIG_RISCV_APLIC_MSI and
      CONFIG_RISCV_IMSIC
